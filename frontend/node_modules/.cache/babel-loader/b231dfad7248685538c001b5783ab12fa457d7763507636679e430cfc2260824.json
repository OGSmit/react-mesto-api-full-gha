{"ast":null,"code":"import _slicedToArray from\"C:/Users/og88t/dev/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useEffect,useState}from\"react\";import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),validationMessage=_useState2[0],setValidationMessage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];var inputRef=useRef();function handleSubmit(e){e.preventDefault();props.onUpdateAvatar({avatar:inputRef.current.value});}function handleChangeLink(e){setValidationMessage(e.target.validationMessage);setIsValid(e.target.validity.valid);}useEffect(function(){inputRef.current.value='';setValidationMessage('');setIsValid(false);},[props.isOpened]);return/*#__PURE__*/_jsxs(PopupWithForm,{isValid:isValid,onSubmit:handleSubmit,buttonText:props.isOpened&&props.isApiProcessing?'Сохраняю...':'Сохранить',isOpened:props.isOpened,onClose:props.onClose,name:\"popup_edit-avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef||'',onChange:handleChangeLink,type:\"url\",id:\"link\",className:\"popup__inputs popup__inputs_type_hobby\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",name:\"avatar\",required:\"\",minLength:2}),/*#__PURE__*/_jsx(\"span\",{className:validationMessage.length<1?\"link-error popup__input-error\":\"link-error popup__input-error popup__input-error_visible\",children:validationMessage})]});}export default EditAvatarPopup;","map":{"version":3,"names":["useRef","useEffect","useState","PopupWithForm","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","props","_useState","_useState2","_slicedToArray","validationMessage","setValidationMessage","_useState3","_useState4","isValid","setIsValid","inputRef","handleSubmit","e","preventDefault","onUpdateAvatar","avatar","current","value","handleChangeLink","target","validity","valid","isOpened","onSubmit","buttonText","isApiProcessing","onClose","name","title","children","ref","onChange","type","id","className","placeholder","required","minLength","length"],"sources":["C:/Users/og88t/dev/react-mesto-api-full-gha/frontend/src/component/EditAvatarPopup.js"],"sourcesContent":["import { useRef, useEffect, useState } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const [validationMessage, setValidationMessage] = useState('');\r\n  const [isValid, setIsValid] = useState(false)\r\n  const inputRef = useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: inputRef.current.value\r\n    });\r\n  }\r\n\r\n  function handleChangeLink(e) {\r\n    setValidationMessage(e.target.validationMessage)\r\n    setIsValid(e.target.validity.valid)\r\n  }\r\n\r\n  useEffect(() => {\r\n    inputRef.current.value = '';\r\n    setValidationMessage('');\r\n    setIsValid(false);\r\n  }, [props.isOpened])\r\n\r\n  return (\r\n    <PopupWithForm isValid={isValid} onSubmit={handleSubmit} buttonText={props.isOpened && props.isApiProcessing ? 'Сохраняю...' : 'Сохранить'} isOpened={props.isOpened} onClose={props.onClose} name=\"popup_edit-avatar\" title=\"Обновить аватар\">\r\n      <input\r\n        ref={inputRef || ''}\r\n        onChange={handleChangeLink}\r\n        type=\"url\"\r\n        id=\"link\"\r\n        className=\"popup__inputs popup__inputs_type_hobby\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        name=\"avatar\"\r\n        required=\"\"\r\n        minLength={2}\r\n      />\r\n      <span className={validationMessage.length < 1 ? \"link-error popup__input-error\" : \"link-error popup__input-error popup__input-error_visible\"} >{validationMessage}</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;"],"mappings":"0IAAA,OAASA,MAAM,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACnD,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5C,QAAS,CAAAC,eAAeA,CAACC,KAAK,CAAE,CAC9B,IAAAC,SAAA,CAAkDR,QAAQ,CAAC,EAAE,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvDG,iBAAiB,CAAAF,UAAA,IAAEG,oBAAoB,CAAAH,UAAA,IAC9C,IAAAI,UAAA,CAA8Bb,QAAQ,CAAC,KAAK,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAtCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,GAAM,CAAAG,QAAQ,CAAGnB,MAAM,EAAE,CAEzB,QAAS,CAAAoB,YAAYA,CAACC,CAAC,CAAE,CACvBA,CAAC,CAACC,cAAc,EAAE,CAClBb,KAAK,CAACc,cAAc,CAAC,CACnBC,MAAM,CAAEL,QAAQ,CAACM,OAAO,CAACC,KAC3B,CAAC,CAAC,CACJ,CAEA,QAAS,CAAAC,gBAAgBA,CAACN,CAAC,CAAE,CAC3BP,oBAAoB,CAACO,CAAC,CAACO,MAAM,CAACf,iBAAiB,CAAC,CAChDK,UAAU,CAACG,CAAC,CAACO,MAAM,CAACC,QAAQ,CAACC,KAAK,CAAC,CACrC,CAEA7B,SAAS,CAAC,UAAM,CACdkB,QAAQ,CAACM,OAAO,CAACC,KAAK,CAAG,EAAE,CAC3BZ,oBAAoB,CAAC,EAAE,CAAC,CACxBI,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,CAACT,KAAK,CAACsB,QAAQ,CAAC,CAAC,CAEpB,mBACExB,KAAA,CAACJ,aAAa,EAACc,OAAO,CAAEA,OAAQ,CAACe,QAAQ,CAAEZ,YAAa,CAACa,UAAU,CAAExB,KAAK,CAACsB,QAAQ,EAAItB,KAAK,CAACyB,eAAe,CAAG,aAAa,CAAG,WAAY,CAACH,QAAQ,CAAEtB,KAAK,CAACsB,QAAS,CAACI,OAAO,CAAE1B,KAAK,CAAC0B,OAAQ,CAACC,IAAI,CAAC,mBAAmB,CAACC,KAAK,CAAC,uFAAiB,CAAAC,QAAA,eAC5OjC,IAAA,UACEkC,GAAG,CAAEpB,QAAQ,EAAI,EAAG,CACpBqB,QAAQ,CAAEb,gBAAiB,CAC3Bc,IAAI,CAAC,KAAK,CACVC,EAAE,CAAC,MAAM,CACTC,SAAS,CAAC,wCAAwC,CAClDC,WAAW,CAAC,oGAAoB,CAChCR,IAAI,CAAC,QAAQ,CACbS,QAAQ,CAAC,EAAE,CACXC,SAAS,CAAE,CAAE,EACb,cACFzC,IAAA,SAAMsC,SAAS,CAAE9B,iBAAiB,CAACkC,MAAM,CAAG,CAAC,CAAG,+BAA+B,CAAG,0DAA2D,CAAAT,QAAA,CAAGzB,iBAAiB,EAAQ,GAC3J,CAEpB,CAEA,cAAe,CAAAL,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}